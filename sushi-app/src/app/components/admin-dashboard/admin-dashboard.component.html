<div class="container dashboard-container" *ngIf="!loading && stats">
  <div class="dashboard-header">
    <h1 class="page-title">Tableau de Bord</h1>
    <span class="date-badge">Aujourd'hui</span>
  </div>

  <div class="kpi-grid">
    
    <div class="kpi-card">
      <div class="kpi-info">
        <h3>Chiffre d'Affaires</h3>
        <p class="kpi-value">{{ stats.kpi.ca | currency:'EUR' }}</p>
        <small>~ Total validÃ©</small>
      </div>
      <div class="kpi-icon green">ğŸ’²</div>
    </div>

    <div class="kpi-card">
      <div class="kpi-info">
        <h3>Total Commandes</h3>
        <p class="kpi-value">{{ stats.kpi.orders }}</p>
        <small>Commandes passÃ©es</small>
      </div>
      <div class="kpi-icon orange">ğŸ§¾</div>
    </div>

    <div class="kpi-card">
      <div class="kpi-info">
        <h3>Panier Moyen</h3>
        <p class="kpi-value">{{ stats.kpi.avg_basket | currency:'EUR' }}</p>
        <small>Par client</small>
      </div>
      <div class="kpi-icon blue">âš–ï¸</div>
    </div>

    <div class="kpi-card">
      <div class="kpi-info">
        <h3>Clients Uniques</h3>
        <p class="kpi-value">{{ stats.kpi.clients }}</p>
        <small>Base active</small>
      </div>
      <div class="kpi-icon purple">ğŸ‘¥</div>
    </div>

  </div>

  <div class="charts-section">
    <div class="chart-card full-width">
      <h3>Ã‰volution du Chiffre d'affaires (30 jours)</h3>
      <div class="chart-wrapper">
        <canvas baseChart 
          [data]="lineChartData" 
          [options]="lineChartOptions" 
          [type]="lineChartType">
        </canvas>
      </div>
    </div>
  </div>

  <div class="bottom-grid">
    
    <div class="list-card">
      <h3>Meilleurs Ventes</h3>
      <div class="product-list">
        <div class="product-item" *ngFor="let product of stats.top_products; let i = index">
          
          <div class="rank">0{{ i + 1 }}</div>
          
          <img [src]="'assets/images/' + product.image + '.jpg'" [alt]="product.name" class="product-thumb">
          
          <div class="product-info">
            <span class="product-name">{{ product.name }}</span>
            <span class="product-sales">{{ product.total_sold }} ventes</span>
          </div>
          <span class="product-price">{{ product.price | currency:'EUR' }}</span>
        </div>
      </div>
    </div>

    <div class="chart-card">
      <h3>Affluence Hebdomadaire</h3>
      <div class="chart-wrapper small">
         <canvas baseChart 
          [data]="barChartData" 
          [options]="barChartOptions" 
          [type]="barChartType">
        </canvas>
      </div>
    </div>

  </div>
</div>